Turbo Assembler	 Version 3.2	    12/19/03 01:16:44	    Page 1
E:\Project\ASM\lr5.ASM



      1				     MASM
      2	0000			     MODEL small
      3	0000			     STACK 256
      4
      5				     show_mes	     macro	   message
      6					       mov	   ah,09h
      7					       lea	     dx,message
      8					       int	      21h
      9				     endm
     10
     11	0000			     .data
     12	0000  01 03 02 05 03 07	06+	     array   db	      1,3,2,5,3,7,6,3,5,4,5,7,5,6,1,8
     13	      03 05 04 05 07 05	06+
     14	      01 08
     15	0010  4D 61 74 72 69 78	3A+	     mess1   db	     'Matrix:',0ah,0dh,'$'
     16	      0A 0D 24
     17	001A  20 0A 0D 24		     s1	     db	     ' ',0ah,0dh,'$'
     18	001E  20 24			     s2	     db	     ' ','$'
     19	0020  02*(30) 24		     s3	     db	     2 dup('0'),'$'
     20	0023  20 24			     char    db	     ' ','$'
     21	0025  53 75 6D 3A 0A 0D	24	     mess2   db	     'Sum:',0ah,0dh,'$'
     22	002C  00			     rez     db	     0
     23	002D  00			     pl	     db	     0
     24	002E  0A 0D 73 75 6D 20	70+	     mess3   db	     0ah,0dh,'sum pozitive:',0ah,0dh,'$'
     25	      6F 7A 69 74 69 76	65+
     26	      3A 0A 0D 24
     27	0040			     .code
     28	0000			     main:
     29	0000  B8 0000s			     mov ax,@data
     30	0003  8E D8			     mov ds,ax
     31
     32					     show_mes mess1
1    33	0005  B4 09			       mov	   ah,09h
1    34	0007  BA 0010r			       lea	     dx,mess1
1    35	000A  CD 21			       int	      21h
     36	000C  33 C0			     xor      ax,ax
     37	000E  BE 0000			     mov      si,0
     38	0011  BB 0000			     mov      bx,0
     39	0014  B9 0004			     mov      cx,4
     40	0017			     external:
     41	0017  51			     push     cx
     42	0018  B9 0004			     mov      cx,4
     43	001B  BE 0000			     mov      si,0
     44	001E			     internal:
     45	001E  8A 80 0000r		     mov      al,array[bx][si]
     46	0022  46			     inc      si
     47	0023  04 30			     add      al,30h
     48	0025  A2 0023r			     mov      char,al
     49					     show_mes char
1    50	0028  B4 09			       mov	   ah,09h
1    51	002A  BA 0023r			       lea	     dx,char
1    52	002D  CD 21			       int	      21h
     53					     show_mes s2
1    54	002F  B4 09			       mov	   ah,09h
1    55	0031  BA 001Er			       lea	     dx,s2
1    56	0034  CD 21			       int	      21h
     57	0036  E2 E6		     loop     internal
Turbo Assembler	 Version 3.2	    12/19/03 01:16:44	    Page 2
E:\Project\ASM\lr5.ASM



     58	0038  59			     pop      cx
     59	0039  83 C3 04			     add      bx,4
     60					     show_mes s1
1    61	003C  B4 09			       mov	   ah,09h
1    62	003E  BA 001Ar			       lea	     dx,s1
1    63	0041  CD 21			       int	      21h
     64	0043  E2 D2		     loop     external
     65					     show_mes mess2
1    66	0045  B4 09			       mov	   ah,09h
1    67	0047  BA 0025r			       lea	     dx,mess2
1    68	004A  CD 21			       int	      21h
     69	004C  33 C0			     xor      ax,ax
     70	004E  BE 0000			     mov      si,0
     71	0051  BB 0000			     mov      bx,0
     72	0054  B9 0004			     mov      cx,4
     73	0057  BA 0001			     mov      dx,1
     74	005A			     external2:
     75	005A  51			     push     cx
     76	005B  8B CA			     mov      cx,dx
     77	005D  42			     inc      dx
     78	005E  BE 0000			     mov      si,0
     79	0061			     internal2:
     80	0061  8A 80 0000r		     mov      al,array[bx][si]
     81	0065  46			     inc      si
     82	0066  00 06 002Cr		     add      rez,al
     83	006A  3C 00			     cmp      al,0
     84	006C  7C 02			     jl	      m1
     85	006E  FE C4			     inc      ah
     86	0070				     m1:
     87	0070  E2 EF		     loop internal2
     88	0072  59			     pop      cx
     89	0073  83 C3 04			     add      bx,4
     90	0076  E2 E2		     loop external2
     91	0078  88 26 002Dr		     mov      pl,ah
     92	007C  33 C0			     xor      ax,ax
     93	007E  33 D2			     xor      dx,dx
     94	0080  A0 002Cr			     mov      al,rez
     95	0083  BE 0000			     mov      si,0
     96	0086  99			     cwd
     97	0087  BB 000A			     mov      bx,10
     98	008A  F7 F3			     div      bx
     99	008C  04 30			     add      al,30h
    100	008E  88 84 0020r		     mov      s3[si],al
    101	0092  80 C2 30			     add      dl,30h
    102	0095  46			     inc      si
    103	0096  88 94 0020r		     mov      s3[si],dl
    104					     show_mes s3
1   105	009A  B4 09			       mov	   ah,09h
1   106	009C  BA 0020r			       lea	     dx,s3
1   107	009F  CD 21			       int	      21h
    108					     show_mes mess3
1   109	00A1  B4 09			       mov	   ah,09h
1   110	00A3  BA 002Er			       lea	     dx,mess3
1   111	00A6  CD 21			       int	      21h
    112	00A8  33 C0			     xor      ax,ax
    113	00AA  A0 002Dr			     mov      al,pl
    114	00AD  BE 0000			     mov      si,0
Turbo Assembler	 Version 3.2	    12/19/03 01:16:44	    Page 3
E:\Project\ASM\lr5.ASM



    115	00B0  99			     cwd
    116	00B1  F7 F3			     div      bx
    117	00B3  04 30			     add      al,30h
    118	00B5  88 84 0020r		     mov      s3[si],al
    119	00B9  80 C2 30			     add      dl,30h
    120	00BC  46			     inc      si
    121	00BD  88 94 0020r		     mov      s3[si],dl
    122					     show_mes s3
1   123	00C1  B4 09			       mov	   ah,09h
1   124	00C3  BA 0020r			       lea	     dx,s3
1   125	00C6  CD 21			       int	      21h
    126
    127	00C8  B8 4C00			  mov ax,4c00h
    128	00CB  CD 21			  int 21h
    129				     end main
Turbo Assembler	 Version 3.2	    12/19/03 01:16:44	    Page 4
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "12/19/03"
??FILENAME			  Text	 "lr5	  "
??TIME				  Text	 "01:16:44"
??VERSION			  Number 0314
@32BIT				  Text	 0
@CODE				  Text	 _TEXT
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 LR5
@INTERFACE			  Text	 00H
@MODEL				  Text	 2
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ARRAY				  Byte	 DGROUP:0000
CHAR				  Byte	 DGROUP:0023
EXTERNAL			  Near	 _TEXT:0017
EXTERNAL2			  Near	 _TEXT:005A
INTERNAL			  Near	 _TEXT:001E
INTERNAL2			  Near	 _TEXT:0061
M1				  Near	 _TEXT:0070
MAIN				  Near	 _TEXT:0000
MESS1				  Byte	 DGROUP:0010
MESS2				  Byte	 DGROUP:0025
MESS3				  Byte	 DGROUP:002E
PL				  Byte	 DGROUP:002D
REZ				  Byte	 DGROUP:002C
S1				  Byte	 DGROUP:001A
S2				  Byte	 DGROUP:001E
S3				  Byte	 DGROUP:0020

Macro Name

SHOW_MES

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  STACK				  16  0100 Para	  Stack	  STACK
  _DATA				  16  0040 Word	  Public  DATA
_TEXT				  16  00CD Word	  Public  CODE
